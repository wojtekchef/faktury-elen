services:
  - type: web
    name: faktury-elen
    env: docker
    plan: free       # możesz zmienić na starter jeśli web też ma być płatny
    region: frankfurt
    dockerCommand: >
      sh -c "flask db upgrade &&
             gunicorn -w 2 -k gthread -b 0.0.0.0:$PORT app:app"
    envVars:
      - key: FLASK_APP
        value: app:app
      - key: SECRET_KEY
        value: "55b941328935747370cbc567efe13d9ee855c0e3dd50c760ef1f9df88c56d6a3"
      - key: DATABASE_URL
        fromDatabase:
          name: faktury-db
          property: connectionString

databases:
  - name: faktury-db
    databaseName: faktury
    plan: free       # darmowa baza PostgreSQL (512 MB)
    region: frankfurt
